# 🩺🎁 TaxBuddy (医療費控除 ＋ ふるさと納税 管理アプリ)
[![Biome Badge](https://img.shields.io/badge/Linter-Biome-60a5fa?style=flat&logo=biome&logoColor=white)](https://biomejs.dev/)

確定申告を「苦痛」から「達成感」へ。
医療費控除とふるさと納税のデータを一括管理し、Numbers（macOS）での書き出しまでシームレスに行うためのWebアプリです。

## ✨ 特徴

- **二刀流ダッシュボード**: 医療費とふるさと納税、それぞれの控除額と合計還付見込額をリアルタイムに算出。
- **インテリジェント入力**: 
  - 過去に入力した病院名や自治体名を自動でサジェスト。
  - 日本語化・最適化されたカレンダーUIによる快適な日付選択。
- **Numbers最適化エクスポート**: macOSのNumbersで文字化けせずに開けるBOM付きCSV形式に対応。
- **完全ローカル保存**: データは外部サーバーへ送信されず、ブラウザのLocalStorageに安全に保存。
- **モダンなUI/UX**: 
  - **OS連動ダークモード**: macOSの外観設定に自動追従。
  - **M5 Mac最適化**: 高速なレスポンスと快適なタイピング体験を追求。

## 🛠 技術スタック

- **Framework**: [Next.js (App Router)](https://nextjs.org/)
- **Styling**: [Tailwind CSS v4](https://tailwindcss.com/)
- **Linter/Formatter**: [Biome](https://biomejs.dev/)
- **Language**: TypeScript

## 🚀 使い方

1. **医療費**: 領収書を見ながら「日付・氏名・病院・金額」を入力。
2. **ふるさと納税**: 自治体、金額、返礼品、ワンストップ特例の有無を記録。
3. **確認**: 上部のダッシュボードで、現在の合計還付・減税予定額を確認。
4. **提出準備**: 確定申告時に「📊 Numbers形式で書き出す」をクリックし、集計表を作成。

## 📝 計算ロジックについて

本アプリでは以下の計算式を採用しています：
- **医療費控除額** = (支払合計 - 補填合計) - 100,000円
- **ふるさと納税控除額** = 寄付合計額 - 2,000円
- **還付・減税見込額** = (医療費控除額 × 所得税率(20%と仮定)) + (ふるさと納税控除対象額)
  ※ふるさと納税は、所得に応じた限度額内であれば、自己負担2,000円を除いた全額が所得税・住民税から控除されます。

---

## 📈 制作工程・進捗状況

### 1. 基盤・医療費フェーズ（Done ✅）
- [x] プロジェクト初期化・基本UI作成
- [x] カレンダー機能導入と日本語化・最適化
- [x] ダークモード完全対応
- [x] 病院名の入力サジェスト機能

### 2. 税制拡張フェーズ（Done ✅）
- [x] 医療費 ⇔ ふるさと納税 のタブ切り替えUI
- [x] ふるさと納税専用フォーム（自治体名、寄付額、ワンストップ特例）
- [x] 計算ロジックの統合（医療費＋寄付金の合算）
- [x] ブラウザリロード時のデータ永続化（localStorage）

### 3. 機能強化・調整フェーズ（Working 🚀）
- [ ] 自治体名の入力サジェスト履歴保存
- [ ] 寄付金受領証明書の管理チェック機能
- [ ] 控除限度額シミュレーター

### 4. 完成フェーズ（Upcoming 📅）
- [ ] データのインポート機能（JSON/CSV読み込みによる復元）
- [ ] ファイル保存機能（JSON形式での書き出し）
- [ ] 各種LICENSE設定

---
Developed on M5 MacBook Pro.

## License
This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.